<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FC釣魚戰鬥畫面 - 點陣魚版</title>
<style>
body{
  margin:0;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
#wrapper{
  position:relative;
}
canvas{
  image-rendering:pixelated;
  width:512px;   /* 放大2倍 */
  height:480px;
  background:#1e90ff;
}
.scanlines{
  pointer-events:none;
  position:absolute;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background:repeating-linear-gradient(
    to bottom,
    rgba(0,0,0,0.15) 0px,
    rgba(0,0,0,0.15) 1px,
    transparent 2px,
    transparent 3px
  );
}
</style>
</head>
<body>

<div id="wrapper">
  <canvas id="game" width="256" height="240"></canvas>
  <div class="scanlines"></div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
ctx.imageSmoothingEnabled = false;

let frame = 0;

/* ===== FC風像素魚 (16x8) ===== */
const fishFrame1 = [
"0000111111110000",
"0001112222211100",
"0011222222222110",
"0122222222222211",
"0122222222222211",
"0011222222222110",
"0001112222211100",
"0000111111110000"
];

const fishFrame2 = [
"0000111111110000",
"0001112222211000",
"0011222222221000",
"0122222222221100",
"0122222222221100",
"0011222222221000",
"0001112222211000",
"0000111111110000"
];

/* NES風限制色 */
const palette = {
  "0": null,
  "1": "#0c0c0c",   // 深色輪廓
  "2": "#2f2f2f"    // 魚身
};

function drawFish(x,y){
  const sprite = (frame%30<15)?fishFrame1:fishFrame2;

  for(let row=0; row<sprite.length; row++){
    for(let col=0; col<sprite[row].length; col++){
      const pixel = sprite[row][col];
      if(palette[pixel]){
        ctx.fillStyle = palette[pixel];
        ctx.fillRect(x+col, y+row, 1, 1);
      }
    }
  }
}

function draw(){

  ctx.clearRect(0,0,256,240);

  /* 水面條紋 */
  for(let i=0;i<240;i+=8){
    ctx.fillStyle = i%16===0 ? "#1e90ff" : "#1878d6";
    ctx.fillRect(0,i,256,8);
  }

  /* 魚 */
  drawFish(100,110);

  /* 張力條 */
  ctx.fillStyle="#000";
  ctx.fillRect(230,20,8,200);
  ctx.fillStyle="#00ff00";
  ctx.fillRect(230,120,8,100);

  /* 距離 */
  ctx.fillStyle="#000";
  ctx.font="12px monospace";
  ctx.fillText("DIST 085",10,20);

  /* 閃爍 ! */
  if(frame%40<20){
    ctx.fillStyle="#ffff00";
    ctx.fillText("!",120,90);
  }

  frame++;
  requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>