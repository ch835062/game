<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å·¥ç¨‹è»Šæ¶ˆæ¶ˆæ¨‚ è±ªè¯ç‰ˆ</title>

<style>
body {
    text-align: center;
    background: linear-gradient(#aee1ff, #fff8dc);
    font-family: Arial, sans-serif;
}

h1 {
    font-size: 34px;
}

#score {
    font-size: 24px;
    margin: 10px;
}

#game {
    width: 360px;
    margin: auto;
    display: grid;
    grid-template-columns: repeat(4, 85px);
    gap: 8px;
}

.tile {
    width: 85px;
    height: 85px;
    font-size: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border-radius: 20px;
    cursor: pointer;
    transition: 0.2s;
}

.tile:hover {
    transform: scale(1.1);
}

.tile.selected {
    background: #ffeb3b;
}

.tile.hint {
    animation: glow 1s infinite;
}

@keyframes glow {
    0% { box-shadow: 0 0 5px orange; }
    50% { box-shadow: 0 0 20px red; }
    100% { box-shadow: 0 0 5px orange; }
}

.explode {
    animation: explode 0.4s forwards;
}

@keyframes explode {
    0% { transform: scale(1); opacity: 1; }
    100% { transform: scale(2); opacity: 0; }
}
</style>
</head>

<body>

<h1>ğŸšœ å·¥ç¨‹è»Šæ¶ˆæ¶ˆæ¨‚ è±ªè¯ç‰ˆ ğŸš’</h1>
<div id="score">å¾—åˆ†ï¼š0</div>
<div id="game"></div>

<script>
const vehicles = ["ğŸšœ","ğŸš’","ğŸš›","ğŸš§"];
const boardSize = 4;
let board = [];
let selectedTiles = [];
let score = 0;

const game = document.getElementById("game");
const scoreDisplay = document.getElementById("score");

function createBoard() {
    game.innerHTML = "";
    board = [];

    for (let i = 0; i < boardSize * boardSize; i++) {
        const tile = document.createElement("div");
        tile.classList.add("tile");
        tile.dataset.index = i;
        tile.textContent = vehicles[Math.floor(Math.random()*vehicles.length)];
        tile.addEventListener("click", selectTile);
        game.appendChild(tile);
        board.push(tile);
    }

    setTimeout(showHint, 800);
}

function selectTile() {
    if (selectedTiles.includes(this)) return;

    this.classList.add("selected");
    selectedTiles.push(this);

    if (selectedTiles.length === 3) {
        checkMatch();
    }
}

function checkMatch() {
    const icons = selectedTiles.map(t => t.textContent);
    if (icons[0] === icons[1] && icons[1] === icons[2]) {
        score += 20;
        scoreDisplay.textContent = "å¾—åˆ†ï¼š" + score;
        playSuccessSound();

        selectedTiles.forEach(tile=>{
            tile.classList.add("explode");
        });

        setTimeout(()=>{
            selectedTiles.forEach(tile=>{
                tile.classList.remove("explode");
                tile.textContent = vehicles[Math.floor(Math.random()*vehicles.length)];
                tile.classList.remove("selected");
            });
            selectedTiles = [];
            showHint();
        },400);
    } else {
        setTimeout(()=>{
            selectedTiles.forEach(t=>t.classList.remove("selected"));
            selectedTiles = [];
        },500);
    }
}

function showHint() {
    board.forEach(t=>t.classList.remove("hint"));

    let counts = {};
    board.forEach(tile=>{
        counts[tile.textContent] = (counts[tile.textContent] || 0)+1;
    });

    for (let vehicle in counts) {
        if (counts[vehicle] >= 3) {
            let shown = 0;
            board.forEach(tile=>{
                if (tile.textContent === vehicle && shown < 3) {
                    tile.classList.add("hint");
                    shown++;
                }
            });
            break;
        }
    }
}

function playSuccessSound() {
    const audio = new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");
    audio.play();
}

createBoard();
</script>

</body>
</html>